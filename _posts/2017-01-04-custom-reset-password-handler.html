---
layout: post
title:  "Custom Reset Password Handler"
date:   2017-01-04 12:28:18 -0500
categories: meteor
---

I figured out how to override the default action and send the password reset email via CustomerIO.

<pre>
Accounts.sendResetPasswordEmail = function(userId) {
	var token = Random.secret();
	Meteor.users.update(userId, {$set: {
		'services.password.reset': {
			'token': token,
			'email': email,
			'when': new Date()
		}
	}});
	
	CustomerIO.defer('event', userId, {
		'name': 'reset_password',
		'data': {'reset_link': Accounts.urls.resetPassword(token)},
	});
};
</pre>